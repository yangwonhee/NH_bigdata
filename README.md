# 분석보고서

**분석 목적 및 목표**

이번 프로젝트는 NH투자증권에서 제공한 MTS 컨텐츠 데이터와 미국 주식/ETF 시세 정보를 활용해 성장 잠재력이 높은 ETF를 발굴하고 추천하는 것을 목표로 했어요. 이를 통해 투자자들이 높은 수익을 기대하면서도 리스크를 잘 관리할 수 있는 ETF를 선택할 수 있도록 돕고자 했습니다. 핵심 목표는 투자자에게 최적의 투자 전략을 제안할 수 있는 맞춤형 ETF 큐레이션 서비스를 기획하는 것입니다.

**분석 방법론**

1. **데이터 수집 및 전처리**: 이번 분석에서는 NH투자증권이 제공한 ETF 데이터와 yfinance 라이브러리를 통해 수집한 S&P 500 지수 데이터를 활용했습니다. 결측치는 중앙값으로 보정했고, 분석에 꼭 필요한 변수들만 골라 사용했습니다.
2. **특성 엔지니어링**: ETF의 변동성, 수익률, 그리고 S&P 500 지수와의 비교를 통해 ETF의 주요 특성을 파악했습니다. 이동 표준편차로 변동성을 계산했고, S&P 500 지수와의 성과 비교를 통해 ETF의 상대적 효율성을 평가했습니다. 또한, 리스크 조정 수익률도 계산해 ETF의 안정성과 수익성을 함께 살펴보았습니다.
3. **모델 구축 및 평가**: 랜덤 포레스트 회귀 모델을 사용해 ETF의 다음 기간 수익률을 예측했습니다. 데이터를 훈련 세트와 테스트 세트로 나눠 모델을 학습시켰고, 교차 검증을 통해 성능을 평가했습니다. 모델의 설명력은 다소 낮았지만, 개선의 여지가 있는 방향성을 확인할 수 있었습니다.
4. **리스크 분석 및 추천**: 예측된 수익률을 바탕으로 ETF를 랭킹화하고, 최대 낙폭(Max Drawdown)을 통해 리스크도 함께 고려했습니다. 최종적으로 성장 가능성이 높은 ETF 상위 10개를 선정했어요.
5. **외부 정보 통합 및 생성형 AI 적용**: 외부 금융 뉴스 데이터를 활용해 ETF의 최신 정보를 수집했습니다. 생성형 AI를 사용해 ETF에 대한 요약 설명을 생성하여 투자자들이 이해하기 쉽게 제공했습니다. 이를 통해 투자자들이 보다 현명한 매수/매도 결정을 내릴 수 있도록 했습니다.

**분석 결과 및 해석**

- **수익률 예측**: 랜덤 포레스트 모델을 통해 각 ETF의 다음 기간 수익률을 예측하고, 성장 잠재력이 높은 ETF를 선정했습니다.
- **리스크 관리**: 최대 낙폭(Max Drawdown)을 통해 리스크를 조정한 수익률을 평가했습니다. 이를 통해 투자자들이 위험을 최소화하면서도 높은 수익을 기대할 수 있는 ETF를 선택할 수 있도록 돕고자 했습니다.
- **추천 ETF 리스트**: 수익률과 리스크를 종합적으로 고려해 최종적으로 추천한 상위 10개의 ETF는 성장 잠재력이 높은 것으로 판단됩니다.
- **생성형 AI 설명 제공**: 최신 금융 뉴스 데이터를 바탕으로 GPT 모델을 활용해 각 ETF에 대한 요약 설명을 제공했습니다. 이를 통해 투자자들이 ETF의 상황과 전망을 쉽게 이해할 수 있게 했습니다.

**서비스 기획 아이디어 및 발전 방향**

- **ETF 큐레이션 서비스**: 사용자 맞춤형 ETF 큐레이션 서비스를 제공하고자 합니다. 이 서비스는 사용자의 투자 성향(예: 위험 감수 성향, 목표 수익률 등)에 맞춰 최적의 ETF 포트폴리오를 추천해 줍니다. 성장 가능성이 높은 ETF와 리스크가 적절히 관리된 ETF를 조합해 사용자에게 맞춤형 투자 전략을 제안할 수 있습니다.
- **시각적 대시보드 제공**: 분석 결과를 시각적으로 쉽게 이해할 수 있도록 대시보드를 구축합니다. 추천된 ETF의 과거 성과와 예측된 수익률, 최대 낙폭 등을 그래프로 보여줌으로써 투자자들이 더 나은 결정을 내릴 수 있도록 지원합니다.
- **리스크 조정 수익률 기반 필터링 기능**: 리스크 대비 높은 수익을 목표로 하는 투자자들을 위해 리스크 조정 수익률(Sortino Ratio, Sharpe Ratio 등)을 기준으로 ETF를 필터링하는 기능을 추가할 예정입니다. 이를 통해 사용자는 자신의 투자 목표와 리스크 감수 성향에 맞는 ETF를 쉽게 찾을 수 있습니다.
- **백테스팅 및 투자 전략 최적화**: 추천된 ETF 포트폴리오의 과거 데이터를 통해 백테스팅을 수행하고, 실제 투자 시 발생할 수 있는 성과를 예측합니다. 이를 통해 전략의 신뢰성을 높이고 최적화된 투자 전략을 제안합니다.
- **생성형 AI를 통한 실시간 정보 제공**: 생성형 AI를 통해 실시간으로 ETF 관련 최신 정보를 제공하여, 투자자들이 시장의 변화에 빠르게 대응할 수 있도록 돕습니다. 최신 뉴스와 예측 데이터를 종합적으로 고려한 정보를 제공함으로써 더 나은 투자 결정을 내릴 수 있습니다.

**위 데이터를 이용한 발전 방향 및 서비스 아이디어**

- **고객 맞춤형 투자 컨설팅**: NH투자증권의 데이터와 미국 주식/ETF 정보를 활용해 고객 맞춤형 투자 컨설팅 서비스를 구축할 수 있습니다. 고객의 투자 목표와 성향에 맞춘 ETF와 주식 포트폴리오를 추천하고, 실시간 시장 변화에 따라 전략을 조정해 줄 수 있습니다.
- **AI 기반 리밸런싱 알림 서비스**: AI가 자동으로 포트폴리오 리밸런싱 필요성을 감지하고, 고객에게 알림을 제공하는 기능을 추가할 수 있습니다. 이를 통해 투자자들이 시장 변화에 민첩하게 대응하고, 최적의 포트폴리오 구성을 유지할 수 있도록 돕습니다.
- **시장 상황별 ETF 제안**: 금리 상승기나 경기 침체기 등 특정 시장 상황에 맞춰 적합한 ETF를 추천하는 기능을 추가할 수 있습니다. 거시 경제 지표(예: 금리, 인플레이션 등)를 추가 분석하여 시장 변화에 따라 가장 적합한 ETF를 제안하는 방식입니다.
- **생성형 AI 활용 투자 전략 설명 기능**: 생성형 AI를 활용해 각 ETF와 관련된 최신 시장 상황과 예측된 수익률을 바탕으로 투자 전략을 설명하는 기능을 추가하고자 합니다. 이를 통해 투자자들은 각 ETF에 대한 깊이 있는 이해를 바탕으로 더 나은 결정을 내릴 수 있습니다.

Dataset Info.

NH_CONTEST_NW_FC_STK_IEM_IFO.csv [파일] 
→ LTG_TOT_STK_QTY: 상장주식총수량,MKT_PR_TOT_AMT: 시가총액 말고는 없는듯
설명: 8월 27일 기준 해외종목 정보.
컬럼 정보:
TCK_IEM_CD: 티커종목코드
FC_SEC_KRL_NM: 외화증권한글명
FC_SEC_ENG_NM: 외화증권영문명
STK_ETF_DIT_CD: 주식/ETF구분코드
LTG_TOT_STK_QTY: 상장주식총수량
FC_MKT_DIT_CD: 외화시장구분코드
CO_ADR: 회사주소
WEB_ADR: 웹주소
BTP_CFC_NM: 업종분류명
CEO_NM: CEO명
ENG_UTK_OTL_CTS: 영문사업개요내용
SER_CFC_NM: 섹터분류명
IDS_NM: 산업명
MKT_PR_TOT_AMT: 시가총액

---

NH_CONTEST_STK_DT_QUT.csv [파일] → 
설명: 2024년 05월 28일부터 2024년 08월 27일까지 NH_CONTEST_NW_FC_STK_IEM_IFO.csv에 있는 종목 일자별 시세 정보
컬럼 정보:
BSE_DT: 거래일자
TCK_IEM_CD: 티커종목코드
IEM_ONG_PR: 종목시가
IEM_HI_PR: 종목고가
IEM_LOW_PR: 종목저가
IEM_END_PR: 종목종가
BF_DD_CMP_IND_PR: 전일대비증감가격
BF_DD_CMP_IND_RT: 전일대비증감율
ACL_TRD_QTY: 누적거래수량
TRD_CST: 거래대금
SLL_CNS_SUM_QTY: 매도체결합계수량
BYN_CNS_SUM_QTY: 매수체결합계수량
SBY_BSE_XCG_RT: 환율

---

NH_CONTEST_NHDATA_STK_DD_IFO.csv [파일]
설명: 2024년 05월 28일부터 2024년 08월 27일까지 NH데이터 기반 주식 일별 정보.
컬럼 정보:
BSE_DT: BSE_DT
TCK_IEM_CD: 티커종목코드
TOT_HLD_ACT_CNT: 총보유계좌수
TOT_HLD_QTY: 총보유수량
TCO_AVG_HLD_QTY: 당사평균보유수량
TCO_AVG_HLD_WHT_RT: 당사평균보유비중비율
TCO_AVG_EAL_PLS: 당사평균평가손익
TCO_AVG_PHS_UIT_PR: 당사평균매입단가
TCO_AVG_PFT_RT: 당사평균수익율
TCO_AVG_HLD_TE_DD_CNT: 당사평균보유기간일수
DIST_HNK_PCT10_NMV: 분포상위10퍼센트수치
DIST_HNK_PCT30_NMV: 분포상위30퍼센트수치
DIST_HNK_PCT50_NMV: 분포상위50퍼센트수치
DIST_HNK_PCT70_NMV: 분포상위70퍼센트수치
DIST_HNK_PCT90_NMV: 분포상위90퍼센트수치
BSE_END_PR: 기준종가
LSS_IVO_RT: 손실투자자비율
PFT_IVO_RT: 수익투자자비율
IFW_ACT_CNT: 신규매수계좌수
OFW_ACT_CNT: 전량매도계좌수
VW_TGT_CNT: 종목조회건수
RGS_TGT_CNT: 관심종목등록건수

---

NH_CONTEST_NHDATA_IFW_OFW_IFO.csv [파일]
설명: 2024년 05월 28일부터 2024년 08월 27일까지 유입/유출 종목 데이터
해외종목의 유입/유출으로 한정, 최대 TOP5까지 제공
컬럼 정보:
BSE_DT: 기준일자
TCK_IEM_CD: 티커종목코드
IFW_OFW_DIT_CD: 유입/유출구분코드
IFW_OFW_TCK_CD: 유입/유출티커코드
IFW_OFW_AMT_WHT_RT: 유입/유출금액비중
IFW_OFW_RNK: 유입/유출랭크

---

NH_CONTEST_NHDATA_CUS_TP_IFO.csv [파일]
설명: 2024년 05월 28일부터 2024년 08월 27일까지 NH데이터 기반 고객 보유 정보.
컬럼 정보:
BSE_DT: 기준일자
TCK_IEM_CD: 티커종목코드
CUS_CGR_LLF_CD: 고객구성대분류코드
CUS_CGR_MLF_CD: 고객구성중분류코드
CUS_CGR_ACT_CNT_RT: 고객구성계좌수비율
CUS_CGR_IVS_RT: 고객구성투자비율

---

NH_CONTEST_DATA_ETF_HOLDINGS.csv [파일]
설명: 2024년 8월 27일 기준 ETF의 구성 종목.
컬럼 정보:
ETF_TCK_CD: 대상 ETF 티커
TCK_IEM_CD: ETF 개별 구성 종목 티커
MKT_VLU: 보유 종목의 가치 (USD)
FC_SEC_ENG_NM: 보유 종목의 영문명
FC_SEC_KRL_NM: 보유 종목의 한글명
STK_QTY: 보유 종목의 주수 (주)
WHT_PCT: 보유 종목의 비중 (%)
SEC_TP: 보유 종목의 타입 (ST: 주식, EF: ETF, EN: ETN, SSEF: Single-Stock ETF)

---

NH_CONTEST_DATA_HISTORICAL_DIVIDEND.csv [파일]
설명: 2022년 8월 27일부터 2024년 8월 27일까지 ETF 배당 내역.
컬럼 정보:
ETF_TCK_CD: 대상 ETF 티커
EDIV_DT: 배당락일 (YYYYMMDD)
DDN_AMT: 배당금
AED_STKP_DDN_AMT: 수정 배당금
DDN_BSE_DT: 배당 기준일 (YYYYMMDD)
DDN_PYM_DT: 지급일 (YYYYMMDD)
PBA_DT: 공시일 (YYYYMMDD)
DDN_PYM_FCY_CD: 배당 주기 (Quarterly: 분기배당, Weekly: 주배당, Monthly: 월배당, SemiAnnual: 반기배당, Annual: 연배당, Other: 알 수 없음)

---

NH_CONTEST_ETF_SOR_IFO.csv [파일]
설명: 2024년 05월 28일부터 2024년 08월 27일까지 ETF 점수 정보.
컬럼 정보:
BSE_DT: 거래일자
ETF_TCK_CD: 대상 ETF 티커
MM1_TOT_PFT_RT: 1개월총수익율
MM3_TOT_PFT_RT: 3개월총수익율
YR1_TOT_PFT_RT: 1년총수익율
ETF_SOR: ETF점수
ETF_Z_SOR: ETFZ점수
Z_SOR_RNK: Z점수순위
ACL_PFT_RT_Z_SOR: 누적수익율Z점수
IFO_RT_Z_SOR: 정보비율Z점수
SHPR_Z_SOR: 샤프지수Z점수
CRR_Z_SOR: 상관관계Z점수
TRK_ERR_Z_SOR: 트래킹에러Z점수
MXDD_Z_SOR: 최대낙폭Z점수
VTY_Z_SOR: 변동성Z점수